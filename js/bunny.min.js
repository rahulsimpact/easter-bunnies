var GameManager=GameManager||{};GameManager={imageObjectList:[{imgName:"white-bunny.png",dataNumber:1},{imgName:"white-egg.png",dataNumber:1},{imgName:"red-bunny.png",dataNumber:2},{imgName:"red-egg.png",dataNumber:2},{imgName:"orange-bunny.png",dataNumber:3},{imgName:"orange-egg.png",dataNumber:3},{imgName:"yellow-bunny.png",dataNumber:4},{imgName:"yellow-egg.png",dataNumber:4},{imgName:"green-bunny.png",dataNumber:5},{imgName:"green-egg.png",dataNumber:5},{imgName:"blue-bunny.png",dataNumber:6},{imgName:"blue-egg.png",dataNumber:6},{imgName:"indigo-bunny.png",dataNumber:7},{imgName:"indigo-egg.png",dataNumber:7},{imgName:"violet-bunny.png",dataNumber:8},{imgName:"violet-egg.png",dataNumber:8},{imgName:"angel-bunny.png",dataNumber:9},{imgName:"angel-egg.png",dataNumber:9},{imgName:"pirate-bunny.png",dataNumber:10},{imgName:"pirate-egg.png",dataNumber:10},{imgName:"rainbow-bunny.png",dataNumber:11},{imgName:"rainbow-egg.png",dataNumber:11},{imgName:"ninja-bunny.png",dataNumber:12},{imgName:"ninja-egg.png",dataNumber:12}],cardHtmlTemplate:'<li class="flip-container" data-number="$dataNumber"><div class="flipper"><div class="front"><img src="images/back.png"/></div><div class="back"><img src="images/$imgName" /></div></div></li>',isAnimating:false,gameStateEnum:{GAME_NOT_STARTED:0,GAME_IN_PROGRESS:1,GAME_IS_FINISHED:2},gameState:0,numClick:0,init:function(){var b=new Image();b.src="images/back.png";for(var a=0;a<this.imageObjectList.length;a++){b=new Image();b.src="images/"+this.imageObjectList[a].imgName}},startGame:function(){$(".panel-main").hide();$(".panel-game").show();$("html, body").animate({scrollTop:$("#panel-container").offset().top},"fast");this.numClick=0;var a=this.imageObjectList.shuffle();var d=$("ul.cbp-rfgrid");d.html("");for(var c=0;c<a.length;c++){var b=a[c];d.append(this.cardHtmlTemplate.replace("$dataNumber",b.dataNumber).replace("$imgName",b.imgName))}$("ul.cbp-rfgrid li").click(function(){GameManager.clickCard(this)})},clickCard:function(b){var e=$(".cbp-rfgrid li.open")[0];var d=$(b)[0];var c=$(e);var a=$(d);if(!a.hasClass("reveal")&&!this.isAnimating){this.UpdateGameState();if(e){if(e==d){}else{this.numClick++;if(c.data("number")==a.data("number")){this.flipCard(a);c.removeClass("open").addClass("reveal");$(c.find(".back")[0]).css("border","5px solid #00ffff");a.removeClass("open").addClass("reveal");$(a.find(".back")[0]).css("border","5px solid #00ffff");this.UpdateGameState()}else{this.flipCard(a);a.addClass("open");this.isAnimating=true;setTimeout(function(){GameManager.flipCard(a);GameManager.flipCard(c);a.removeClass("open");c.removeClass("open");GameManager.isAnimating=false},500)}}}else{this.numClick++;this.flipCard(a);a.addClass("open")}}},flipCard:function(b){var c,a;if($(b).hasClass("open")){c=$(b).find(".front")[0];a=$(b).find(".back")[0]}else{c=$(b).find(".back")[0];a=$(b).find(".front")[0];$(c).css("border","5px solid #0099cc")}$(c).css({"-webkit-transform":"rotateY(0deg) 0.5s","-moz-transform":"rotateY(0deg) 0.5s","-o-transform":"rotateY(0deg) 0.5s","-ms-transform":"rotateY(0deg) 0.5s",transform:"rotateY(0deg) 0.5s"});$(a).css({"-webkit-transform":"rotateY(180deg) 0.5s","-moz-transform":"rotateY(180deg) 0.5s","-o-transform":"rotateY(180deg) 0.5s","-ms-transform":"rotateY(180deg) 0.5s",transform:"rotateY(180deg) 0.5s"})},UpdateGameState:function(){if(this.gameState==this.gameStateEnum.GAME_NOT_STARTED){this.gameState=this.gameStateEnum.GAME_IN_PROGRESS}if($(".cbp-rfgrid li").length==$(".cbp-rfgrid li.reveal").length){this.gameState=this.gameStateEnum.GAME_IS_FINISHED;this.showGameFinish()}},showGameFinish:function(){var a=this;var b="You took "+this.numClick+" clicks to match all the bunnies and eggs!";swal({title:"Congratulations!",text:b,showCancelButton:true,confirmButtonText:"Play again",cancelButtonText:"cancel",imageUrl:"images/base-bunny.png"},function(){a.startGame()})}};Array.prototype.shuffle=function(){var c=this.length,b,a;if(c==0){return this}while(--c){b=Math.floor(Math.random()*(c+1));a=this[c];this[c]=this[b];this[b]=a}return this};$(document).ready(function(){GameManager.init();$(".btn-play").click(function(){GameManager.startGame()})});